<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Nonlinear Modeling · JuMP</title><meta name="title" content="Nonlinear Modeling · JuMP"/><meta property="og:title" content="Nonlinear Modeling · JuMP"/><meta property="twitter:title" content="Nonlinear Modeling · JuMP"/><meta name="description" content="Documentation for JuMP."/><meta property="og:description" content="Documentation for JuMP."/><meta property="twitter:description" content="Documentation for JuMP."/><script async src="https://www.googletagmanager.com/gtag/js?id=UA-44252521-1"></script><script>  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-44252521-1', {'page_path': location.pathname + location.search + location.hash});
</script><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.048/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.4/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/extra_styles.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img class="docs-light-only" src="../../assets/logo.svg" alt="JuMP logo"/><img class="docs-dark-only" src="../../assets/logo-dark.svg" alt="JuMP logo"/></a><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs (Ctrl + /)"/></form><ul class="docs-menu"><li><input class="collapse-toggle" id="menuitem-1" type="checkbox"/><label class="tocitem" for="menuitem-1"><span class="docs-label">Introduction</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../">Introduction</a></li><li><a class="tocitem" href="../../should_i_use/">Should you use JuMP?</a></li><li><a class="tocitem" href="../../installation/">Installation Guide</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2" type="checkbox"/><label class="tocitem" for="menuitem-2"><span class="docs-label">Tutorials</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-2-1" type="checkbox"/><label class="tocitem" for="menuitem-2-1"><span class="docs-label">Getting started</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../tutorials/getting_started/introduction/">Introduction</a></li><li><a class="tocitem" href="../../tutorials/getting_started/getting_started_with_julia/">Getting started with Julia</a></li><li><a class="tocitem" href="../../tutorials/getting_started/getting_started_with_JuMP/">Getting started with JuMP</a></li><li><a class="tocitem" href="../../tutorials/getting_started/getting_started_with_sets_and_indexing/">Getting started with sets and indexing</a></li><li><a class="tocitem" href="../../tutorials/getting_started/getting_started_with_data_and_plotting/">Getting started with data and plotting</a></li><li><a class="tocitem" href="../../tutorials/getting_started/debugging/">Debugging</a></li><li><a class="tocitem" href="../../tutorials/getting_started/design_patterns_for_larger_models/">Design patterns for larger models</a></li><li><a class="tocitem" href="../../tutorials/getting_started/performance_tips/">Performance tips</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-2" type="checkbox"/><label class="tocitem" for="menuitem-2-2"><span class="docs-label">Linear programs</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../tutorials/linear/introduction/">Introduction</a></li><li><a class="tocitem" href="../../tutorials/linear/diet/">The diet problem</a></li><li><a class="tocitem" href="../../tutorials/linear/cannery/">The cannery problem</a></li><li><a class="tocitem" href="../../tutorials/linear/tips_and_tricks/">Tips and tricks</a></li><li><a class="tocitem" href="../../tutorials/linear/facility_location/">The facility location problem</a></li><li><a class="tocitem" href="../../tutorials/linear/factory_schedule/">The factory schedule example</a></li><li><a class="tocitem" href="../../tutorials/linear/finance/">Financial modeling problems</a></li><li><a class="tocitem" href="../../tutorials/linear/geographic_clustering/">Geographical clustering</a></li><li><a class="tocitem" href="../../tutorials/linear/multi_objective_knapsack/">Multi-objective knapsack</a></li><li><a class="tocitem" href="../../tutorials/linear/multi_objective_examples/">Simple multi-objective examples</a></li><li><a class="tocitem" href="../../tutorials/linear/knapsack/">The knapsack problem example</a></li><li><a class="tocitem" href="../../tutorials/linear/multi/">The multi-commodity flow problem</a></li><li><a class="tocitem" href="../../tutorials/linear/n-queens/">N-Queens</a></li><li><a class="tocitem" href="../../tutorials/linear/lp_sensitivity/">Sensitivity analysis of a linear program</a></li><li><a class="tocitem" href="../../tutorials/linear/network_flows/">Network flow problems</a></li><li><a class="tocitem" href="../../tutorials/linear/sudoku/">Sudoku</a></li><li><a class="tocitem" href="../../tutorials/linear/transp/">The transportation problem</a></li><li><a class="tocitem" href="../../tutorials/linear/callbacks/">Callbacks</a></li><li><a class="tocitem" href="../../tutorials/linear/constraint_programming/">Constraint programming</a></li><li><a class="tocitem" href="../../tutorials/linear/mip_duality/">Computing the duals of a mixed-integer program</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-3" type="checkbox"/><label class="tocitem" for="menuitem-2-3"><span class="docs-label">Nonlinear programs</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../tutorials/nonlinear/introduction/">Introduction</a></li><li><a class="tocitem" href="../../tutorials/nonlinear/simple_examples/">Simple examples</a></li><li><a class="tocitem" href="../../tutorials/nonlinear/portfolio/">Portfolio optimization</a></li><li><a class="tocitem" href="../../tutorials/nonlinear/rocket_control/">Rocket Control</a></li><li><a class="tocitem" href="../../tutorials/nonlinear/space_shuttle_reentry_trajectory/">Optimal control for a Space Shuttle reentry trajectory</a></li><li><a class="tocitem" href="../../tutorials/nonlinear/tips_and_tricks/">Tips and tricks</a></li><li><a class="tocitem" href="../../tutorials/nonlinear/user_defined_hessians/">User-defined Hessians</a></li><li><a class="tocitem" href="../../tutorials/nonlinear/nested_problems/">Nested optimization problems</a></li><li><a class="tocitem" href="../../tutorials/nonlinear/querying_hessians/">Computing Hessians</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-4" type="checkbox"/><label class="tocitem" for="menuitem-2-4"><span class="docs-label">Conic programs</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../tutorials/conic/introduction/">Introduction</a></li><li><a class="tocitem" href="../../tutorials/conic/start_values/">Primal and dual warm-starts</a></li><li><a class="tocitem" href="../../tutorials/conic/tips_and_tricks/">Tips and Tricks</a></li><li><a class="tocitem" href="../../tutorials/conic/simple_examples/">Simple semidefinite programming examples</a></li><li><a class="tocitem" href="../../tutorials/conic/dualization/">Dualization</a></li><li><a class="tocitem" href="../../tutorials/conic/arbitrary_precision/">Arbitrary precision arithmetic</a></li><li><a class="tocitem" href="../../tutorials/conic/logistic_regression/">Logistic regression</a></li><li><a class="tocitem" href="../../tutorials/conic/experiment_design/">Experiment design</a></li><li><a class="tocitem" href="../../tutorials/conic/min_ellipse/">Minimal ellipses</a></li><li><a class="tocitem" href="../../tutorials/conic/ellipse_approx/">Ellipsoid approximation</a></li><li><a class="tocitem" href="../../tutorials/conic/quantum_discrimination/">Quantum state discrimination</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-5" type="checkbox"/><label class="tocitem" for="menuitem-2-5"><span class="docs-label">Algorithms</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../tutorials/algorithms/benders_decomposition/">Benders decomposition</a></li><li><a class="tocitem" href="../../tutorials/algorithms/cutting_stock_column_generation/">Column generation</a></li><li><a class="tocitem" href="../../tutorials/algorithms/tsp_lazy_constraints/">Traveling Salesperson Problem</a></li><li><a class="tocitem" href="../../tutorials/algorithms/parallelism/">Parallelism</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-6" type="checkbox"/><label class="tocitem" for="menuitem-2-6"><span class="docs-label">Applications</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../tutorials/applications/power_systems/">Power Systems</a></li><li><a class="tocitem" href="../../tutorials/applications/optimal_power_flow/">Optimal power flow</a></li><li><a class="tocitem" href="../../tutorials/applications/web_app/">Serving web apps</a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox" checked/><label class="tocitem" for="menuitem-3"><span class="docs-label">Manual</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../models/">Models</a></li><li><a class="tocitem" href="../variables/">Variables</a></li><li><a class="tocitem" href="../constraints/">Constraints</a></li><li><a class="tocitem" href="../expressions/">Expressions</a></li><li><a class="tocitem" href="../objective/">Objectives</a></li><li><a class="tocitem" href="../containers/">Containers</a></li><li><a class="tocitem" href="../solutions/">Solutions</a></li><li><a class="tocitem" href="../nlp/">Nonlinear Modeling</a></li><li><a class="tocitem" href="../callbacks/">Solver-independent Callbacks</a></li><li><a class="tocitem" href="../complex/">Complex number support</a></li><li class="is-active"><a class="tocitem" href>Nonlinear Modeling</a><ul class="internal"><li><a class="tocitem" href="#Set-a-nonlinear-objective"><span>Set a nonlinear objective</span></a></li><li><a class="tocitem" href="#Add-a-nonlinear-constraint"><span>Add a nonlinear constraint</span></a></li><li><a class="tocitem" href="#Create-a-nonlinear-expression"><span>Create a nonlinear expression</span></a></li><li><a class="tocitem" href="#User-defined-functions"><span>User-defined functions</span></a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox"/><label class="tocitem" for="menuitem-4"><span class="docs-label">API Reference</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../api/JuMP/">JuMP</a></li><li><a class="tocitem" href="../../api/JuMP.Containers/">JuMP.Containers</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5" type="checkbox"/><label class="tocitem" for="menuitem-5"><span class="docs-label">Background Information</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../background/algebraic_modeling_languages/">Algebraic modeling languages</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6" type="checkbox"/><label class="tocitem" for="menuitem-6"><span class="docs-label">Developer Docs</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../developers/contributing/">Contributing</a></li><li><a class="tocitem" href="../../developers/extensions/">Extensions</a></li><li><a class="tocitem" href="../../developers/custom_solver_binaries/">Custom binaries</a></li><li><a class="tocitem" href="../../developers/style/">Style Guide</a></li><li><a class="tocitem" href="../../developers/roadmap/">Roadmap</a></li><li><a class="tocitem" href="../../developers/checklists/">Checklists</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-7" type="checkbox"/><label class="tocitem" for="menuitem-7"><span class="docs-label">Solvers</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../packages/solvers/">Introduction</a></li><li><a class="tocitem" href="../../packages/AmplNLWriter/">jump-dev/AmplNLWriter.jl</a></li><li><a class="tocitem" href="../../packages/BARON/">jump-dev/BARON.jl</a></li><li><a class="tocitem" href="../../packages/CPLEX/">jump-dev/CPLEX.jl</a></li><li><a class="tocitem" href="../../packages/CSDP/">jump-dev/CSDP.jl</a></li><li><a class="tocitem" href="../../packages/Cbc/">jump-dev/Cbc.jl</a></li><li><a class="tocitem" href="../../packages/Clp/">jump-dev/Clp.jl</a></li><li><a class="tocitem" href="../../packages/Dualization/">jump-dev/Dualization.jl</a></li><li><a class="tocitem" href="../../packages/ECOS/">jump-dev/ECOS.jl</a></li><li><a class="tocitem" href="../../packages/GLPK/">jump-dev/GLPK.jl</a></li><li><a class="tocitem" href="../../packages/Gurobi/">jump-dev/Gurobi.jl</a></li><li><a class="tocitem" href="../../packages/HiGHS/">jump-dev/HiGHS.jl</a></li><li><a class="tocitem" href="../../packages/Ipopt/">jump-dev/Ipopt.jl</a></li><li><a class="tocitem" href="../../packages/KNITRO/">jump-dev/KNITRO.jl</a></li><li><a class="tocitem" href="../../packages/MiniZinc/">jump-dev/MiniZinc.jl</a></li><li><a class="tocitem" href="../../packages/MosekTools/">jump-dev/MosekTools.jl</a></li><li><a class="tocitem" href="../../packages/MultiObjectiveAlgorithms/">jump-dev/MultiObjectiveAlgorithms.jl</a></li><li><a class="tocitem" href="../../packages/Pajarito/">jump-dev/Pajarito.jl</a></li><li><a class="tocitem" href="../../packages/Pavito/">jump-dev/Pavito.jl</a></li><li><a class="tocitem" href="../../packages/SCS/">jump-dev/SCS.jl</a></li><li><a class="tocitem" href="../../packages/SDPA/">jump-dev/SDPA.jl</a></li><li><a class="tocitem" href="../../packages/SDPNAL/">jump-dev/SDPNAL.jl</a></li><li><a class="tocitem" href="../../packages/SDPT3/">jump-dev/SDPT3.jl</a></li><li><a class="tocitem" href="../../packages/SeDuMi/">jump-dev/SeDuMi.jl</a></li><li><a class="tocitem" href="../../packages/Xpress/">jump-dev/Xpress.jl</a></li><li><a class="tocitem" href="../../packages/COPT/">COPT-Public/COPT.jl</a></li><li><a class="tocitem" href="../../packages/NLopt/">JuliaOpt/NLopt.jl</a></li><li><a class="tocitem" href="../../packages/CDDLib/">JuliaPolyhedra/CDDLib.jl</a></li><li><a class="tocitem" href="../../packages/MadNLP/">MadNLP/MadNLP.jl</a></li><li><a class="tocitem" href="../../packages/PATHSolver/">chkwon/PATHSolver.jl</a></li><li><a class="tocitem" href="../../packages/Hypatia/">chriscoey/Hypatia.jl</a></li><li><a class="tocitem" href="../../packages/DAQP/">darnstrom/DAQP.jl</a></li><li><a class="tocitem" href="../../packages/Tulip/">ds4dm/Tulip.jl</a></li><li><a class="tocitem" href="../../packages/Loraine/">kocvara/Loraine.jl</a></li><li><a class="tocitem" href="../../packages/Alpine/">lanl-ansi/Alpine.jl</a></li><li><a class="tocitem" href="../../packages/Juniper/">lanl-ansi/Juniper.jl</a></li><li><a class="tocitem" href="../../packages/ProxSDP/">mariohsouto/ProxSDP.jl</a></li><li><a class="tocitem" href="../../packages/NEOSServer/">odow/NEOSServer.jl</a></li><li><a class="tocitem" href="../../packages/OSQP/">osqp/OSQP.jl</a></li><li><a class="tocitem" href="../../packages/CDCS/">oxfordcontrol/CDCS.jl</a></li><li><a class="tocitem" href="../../packages/COSMO/">oxfordcontrol/COSMO.jl</a></li><li><a class="tocitem" href="../../packages/Clarabel/">oxfordcontrol/Clarabel.jl</a></li><li><a class="tocitem" href="../../packages/SCIP/">scipopt/SCIP.jl</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-8" type="checkbox"/><label class="tocitem" for="menuitem-8"><span class="docs-label">Extensions</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../extensions/introduction/">Introduction</a></li><li><a class="tocitem" href="../../packages/DiffOpt/">jump-dev/DiffOpt.jl</a></li><li><a class="tocitem" href="../../packages/ParametricOptInterface/">jump-dev/ParametricOptInterface.jl</a></li><li><a class="tocitem" href="../../packages/PolyJuMP/">jump-dev/PolyJuMP.jl</a></li><li><a class="tocitem" href="../../packages/SumOfSquares/">jump-dev/SumOfSquares.jl</a></li><li><a class="tocitem" href="../../packages/InfiniteOpt/">infiniteopt/InfiniteOpt.jl</a></li><li><a class="tocitem" href="../../packages/BilevelJuMP/">joaquimg/BilevelJuMP.jl</a></li><li><a class="tocitem" href="../../packages/SDDP/">odow/SDDP.jl</a></li><li><a class="tocitem" href="../../packages/Plasmo/">plasmo-dev/Plasmo.jl</a></li><li><a class="tocitem" href="../../extensions/DimensionalData/">rafaqz/DimensionalData.jl</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-9" type="checkbox"/><label class="tocitem" for="menuitem-9"><span class="docs-label">MathOptInterface</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-9-1" type="checkbox"/><label class="tocitem" for="menuitem-9-1"><span class="docs-label">Introduction</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../moi/">Introduction</a></li><li><a class="tocitem" href="../../moi/background/motivation/">Motivation</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-9-2" type="checkbox"/><label class="tocitem" for="menuitem-9-2"><span class="docs-label">Tutorials</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../moi/tutorials/example/">Solving a problem using MathOptInterface</a></li><li><a class="tocitem" href="../../moi/tutorials/implementing/">Implementing a solver interface</a></li><li><a class="tocitem" href="../../moi/tutorials/mathprogbase/">Transitioning from MathProgBase</a></li><li><a class="tocitem" href="../../moi/tutorials/bridging_constraint/">Implementing a constraint bridge</a></li><li><a class="tocitem" href="../../moi/tutorials/manipulating_expressions/">Manipulating expressions</a></li><li><a class="tocitem" href="../../moi/tutorials/latency/">Latency</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-9-3" type="checkbox"/><label class="tocitem" for="menuitem-9-3"><span class="docs-label">Manual</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../moi/manual/standard_form/">Standard form problem</a></li><li><a class="tocitem" href="../../moi/manual/models/">Models</a></li><li><a class="tocitem" href="../../moi/manual/variables/">Variables</a></li><li><a class="tocitem" href="../../moi/manual/constraints/">Constraints</a></li><li><a class="tocitem" href="../../moi/manual/solutions/">Solutions</a></li><li><a class="tocitem" href="../../moi/manual/modification/">Problem modification</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-9-4" type="checkbox"/><label class="tocitem" for="menuitem-9-4"><span class="docs-label">Background</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../moi/background/duality/">Duality</a></li><li><a class="tocitem" href="../../moi/background/infeasibility_certificates/">Infeasibility certificates</a></li><li><a class="tocitem" href="../../moi/background/naming_conventions/">Naming conventions</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-9-5" type="checkbox"/><label class="tocitem" for="menuitem-9-5"><span class="docs-label">API Reference</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../moi/reference/standard_form/">Standard form</a></li><li><a class="tocitem" href="../../moi/reference/models/">Models</a></li><li><a class="tocitem" href="../../moi/reference/variables/">Variables</a></li><li><a class="tocitem" href="../../moi/reference/constraints/">Constraints</a></li><li><a class="tocitem" href="../../moi/reference/modification/">Modifications</a></li><li><a class="tocitem" href="../../moi/reference/nonlinear/">Nonlinear programming</a></li><li><a class="tocitem" href="../../moi/reference/callbacks/">Callbacks</a></li><li><a class="tocitem" href="../../moi/reference/errors/">Errors</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-9-6" type="checkbox"/><label class="tocitem" for="menuitem-9-6"><span class="docs-label">Submodules</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-9-6-1" type="checkbox"/><label class="tocitem" for="menuitem-9-6-1"><span class="docs-label">Benchmarks</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../moi/submodules/Benchmarks/overview/">Overview</a></li><li><a class="tocitem" href="../../moi/submodules/Benchmarks/reference/">API Reference</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-9-6-2" type="checkbox"/><label class="tocitem" for="menuitem-9-6-2"><span class="docs-label">Bridges</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../moi/submodules/Bridges/overview/">Overview</a></li><li><a class="tocitem" href="../../moi/submodules/Bridges/list_of_bridges/">List of bridges</a></li><li><a class="tocitem" href="../../moi/submodules/Bridges/reference/">API Reference</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-9-6-3" type="checkbox"/><label class="tocitem" for="menuitem-9-6-3"><span class="docs-label">FileFormats</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../moi/submodules/FileFormats/overview/">Overview</a></li><li><a class="tocitem" href="../../moi/submodules/FileFormats/reference/">API Reference</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-9-6-4" type="checkbox"/><label class="tocitem" for="menuitem-9-6-4"><span class="docs-label">Nonlinear</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../moi/submodules/Nonlinear/overview/">Overview</a></li><li><a class="tocitem" href="../../moi/submodules/Nonlinear/reference/">API Reference</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-9-6-5" type="checkbox"/><label class="tocitem" for="menuitem-9-6-5"><span class="docs-label">Utilities</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../moi/submodules/Utilities/overview/">Overview</a></li><li><a class="tocitem" href="../../moi/submodules/Utilities/reference/">API Reference</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-9-6-6" type="checkbox"/><label class="tocitem" for="menuitem-9-6-6"><span class="docs-label">Test</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../moi/submodules/Test/overview/">Overview</a></li><li><a class="tocitem" href="../../moi/submodules/Test/reference/">API Reference</a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-9-7" type="checkbox"/><label class="tocitem" for="menuitem-9-7"><span class="docs-label">Developer Docs</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../moi/developer/checklists/">Checklists</a></li></ul></li><li><a class="tocitem" href="../../moi/release_notes/">Release notes</a></li></ul></li><li><a class="tocitem" href="../../release_notes/">Release notes</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><div class="docs-left"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Manual</a></li><li class="is-active"><a href>Nonlinear Modeling</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Nonlinear Modeling</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/jump-dev/JuMP.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/jump-dev/JuMP.jl/blob/master/docs/src/manual/nonlinear.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="new_nonlinear_interface"><a class="docs-heading-anchor" href="#new_nonlinear_interface">Nonlinear Modeling</a><a id="new_nonlinear_interface-1"></a><a class="docs-heading-anchor-permalink" href="#new_nonlinear_interface" title="Permalink"></a></h1><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>This page describes an experimental nonlinear interface to JuMP. The API described below is stable, and it will not break with future 1.X releases of JuMP. However, solver support may be limited, and there may be gaps in functionality compared with <a href="../nlp/#Nonlinear-Modeling">Nonlinear Modeling</a>. To report a bug, or request a missing feature, please <a href="https://github.com/jump-dev/JuMP.jl/issues/new/choose">open an issue</a>.</p></div></div><p>JuMP has support for general smooth nonlinear (convex and nonconvex) optimization problems. JuMP is able to provide exact, sparse second-order derivatives to solvers. This information can improve solver accuracy and performance.</p><h2 id="Set-a-nonlinear-objective"><a class="docs-heading-anchor" href="#Set-a-nonlinear-objective">Set a nonlinear objective</a><a id="Set-a-nonlinear-objective-1"></a><a class="docs-heading-anchor-permalink" href="#Set-a-nonlinear-objective" title="Permalink"></a></h2><p>Use <a href="../../api/JuMP/#JuMP.@objective"><code>@objective</code></a> to set a nonlinear objective.</p><pre><code class="language-julia-repl hljs">julia&gt; model = Model();

julia&gt; @variable(model, x[1:2]);

julia&gt; @objective(model, Min, exp(x[1]) - sqrt(x[2]))
exp(x[1]) - sqrt(x[2])</code></pre><p>To modify a nonlinear objective, call <a href="../../api/JuMP/#JuMP.@objective"><code>@objective</code></a> again.</p><h2 id="Add-a-nonlinear-constraint"><a class="docs-heading-anchor" href="#Add-a-nonlinear-constraint">Add a nonlinear constraint</a><a id="Add-a-nonlinear-constraint-1"></a><a class="docs-heading-anchor-permalink" href="#Add-a-nonlinear-constraint" title="Permalink"></a></h2><p>Use <a href="../../api/JuMP/#JuMP.@constraint"><code>@constraint</code></a> to add a nonlinear constraint.</p><pre><code class="language-julia-repl hljs">julia&gt; model = Model();

julia&gt; @variable(model, x[1:2]);

julia&gt; @constraint(model, exp(x[1]) &lt;= 1)
exp(x[1]) - 1.0 ≤ 0

julia&gt; @constraint(model, con[i = 1:2], 2^x[i] &gt;= i)
2-element Vector{ConstraintRef{Model, MathOptInterface.ConstraintIndex{MathOptInterface.ScalarNonlinearFunction, MathOptInterface.GreaterThan{Float64}}, ScalarShape}}:
 con[1] : (2.0 ^ x[1]) - 1.0 ≥ 0
 con[2] : (2.0 ^ x[2]) - 2.0 ≥ 0</code></pre><p>Delete a nonlinear constraint using <a href="../../api/JuMP/#JuMP.delete"><code>delete</code></a>:</p><pre><code class="language-julia-repl hljs">julia&gt; delete(model, con[1])</code></pre><h2 id="Create-a-nonlinear-expression"><a class="docs-heading-anchor" href="#Create-a-nonlinear-expression">Create a nonlinear expression</a><a id="Create-a-nonlinear-expression-1"></a><a class="docs-heading-anchor-permalink" href="#Create-a-nonlinear-expression" title="Permalink"></a></h2><p>Use <a href="../../api/JuMP/#JuMP.@expression"><code>@expression</code></a> to create nonlinear expression objects. The syntax is identical to <a href="../../api/JuMP/#JuMP.@expression"><code>@expression</code></a>, except that the expression can contain nonlinear terms.</p><pre><code class="language-julia-repl hljs">julia&gt; model = Model();

julia&gt; @variable(model, x[1:2]);

julia&gt; expr = @expression(model, exp(x[1]) + sqrt(x[2]))
exp(x[1]) + sqrt(x[2])

julia&gt; my_anon_expr = @expression(model, [i = 1:2], sin(x[i]))
2-element Vector{NonlinearExpr}:
 sin(x[1])
 sin(x[2])

julia&gt; @expression(model, my_expr[i = 1:2], sin(x[i]))
2-element Vector{NonlinearExpr}:
 sin(x[1])
 sin(x[2])</code></pre><p>A <a href="../../api/JuMP/#JuMP.NonlinearExpr"><code>NonlinearExpr</code></a> can be used in <a href="../../api/JuMP/#JuMP.@objective"><code>@objective</code></a>, <a href="../../api/JuMP/#JuMP.@constraint"><code>@constraint</code></a>, and even nested in other <a href="../../api/JuMP/#JuMP.@expression"><code>@expression</code></a>s.</p><pre><code class="language-julia-repl hljs">julia&gt; @objective(model, Min, expr^2 + 1)
((exp(x[1]) + sqrt(x[2])) ^ 2.0) + 1.0

julia&gt; @constraint(model, [i = 1:2], my_expr[i] &lt;= i)
2-element Vector{ConstraintRef{Model, MathOptInterface.ConstraintIndex{MathOptInterface.ScalarNonlinearFunction, MathOptInterface.LessThan{Float64}}, ScalarShape}}:
 sin(x[1]) - 1.0 ≤ 0
 sin(x[2]) - 2.0 ≤ 0

julia&gt; @expression(model, nested[i = 1:2], sin(my_expr[i]))
2-element Vector{NonlinearExpr}:
 sin(sin(x[1]))
 sin(sin(x[2]))</code></pre><p>Use <a href="../../api/JuMP/#JuMP.value"><code>value</code></a> to query the value of a nonlinear expression:</p><pre><code class="language-julia-repl hljs">julia&gt; set_start_value(x[1], 1.0)

julia&gt; value(start_value, nested[1])
0.7456241416655579

julia&gt; sin(sin(1.0))
0.7456241416655579</code></pre><h2 id="User-defined-functions"><a class="docs-heading-anchor" href="#User-defined-functions">User-defined functions</a><a id="User-defined-functions-1"></a><a class="docs-heading-anchor-permalink" href="#User-defined-functions" title="Permalink"></a></h2><p>In addition to a standard list of univariate and multivariate functions recognized by the <code>MOI.Nonlinear</code> submodule, JuMP supports <em>user-defined</em> Julia functions.</p><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>User-defined functions must return a scalar output. For a work-around, see <a href="../../tutorials/nonlinear/tips_and_tricks/#User-defined-functions-with-vector-outputs">User-defined functions with vector outputs</a>.</p></div></div><h3 id="Register-a-function"><a class="docs-heading-anchor" href="#Register-a-function">Register a function</a><a id="Register-a-function-1"></a><a class="docs-heading-anchor-permalink" href="#Register-a-function" title="Permalink"></a></h3><p>Register a user-defined function using the <a href="../../api/JuMP/#JuMP.@register"><code>@register</code></a> macro:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; using JuMP</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; square(x) = x^2</code><code class="nohighlight hljs ansi" style="display:block;">square (generic function with 1 method)</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; f(x, y) = (x - 1)^2 + (y - 2)^2</code><code class="nohighlight hljs ansi" style="display:block;">f (generic function with 1 method)</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; model = Model();</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; @register(model, my_square, 1, square)</code><code class="nohighlight hljs ansi" style="display:block;">UserDefinedFunction(:my_square)</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; @register(model, my_f, 2, f)</code><code class="nohighlight hljs ansi" style="display:block;">UserDefinedFunction(:my_f)</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; @variable(model, x[1:2]);</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; @objective(model, Min, my_f(x[1], my_square(x[2])))</code><code class="nohighlight hljs ansi" style="display:block;">my_f(x[1], my_square(x[2]))</code></pre><p>The arguments to <a href="../../api/JuMP/#JuMP.@register"><code>@register</code></a> are:</p><ol><li>The model in which the function is registered.</li><li>A Julia symbol object which serves as the name of the user-defined function in JuMP expressions. This name must not be the same as that of the function.</li><li>The number of scalar input arguments that the function takes.</li><li>A Julia method which computes the function.</li></ol><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>User-defined functions cannot be re-registered and will not update if you modify the underlying Julia function. If you want to change a user-defined function between solves, rebuild the model or use a different name.</p></div></div><h3 id="Registered-functions-without-macros"><a class="docs-heading-anchor" href="#Registered-functions-without-macros">Registered functions without macros</a><a id="Registered-functions-without-macros-1"></a><a class="docs-heading-anchor-permalink" href="#Registered-functions-without-macros" title="Permalink"></a></h3><p>The <a href="../../api/JuMP/#JuMP.@register"><code>@register</code></a> macro is syntactic sugar for the <a href="../../api/JuMP/#JuMP.add_user_defined_function"><code>add_user_defined_function</code></a> method. Thus, the non-macro version of the preceding example is:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; using JuMP</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; square(x) = x^2</code><code class="nohighlight hljs ansi" style="display:block;">square (generic function with 1 method)</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; f(x, y) = (x - 1)^2 + (y - 2)^2</code><code class="nohighlight hljs ansi" style="display:block;">f (generic function with 1 method)</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; model = Model();</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; my_square = add_user_defined_function(model, :my_square, 1, square)</code><code class="nohighlight hljs ansi" style="display:block;">UserDefinedFunction(:my_square)</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; my_f = add_user_defined_function(model, :my_f, 2, f)</code><code class="nohighlight hljs ansi" style="display:block;">UserDefinedFunction(:my_f)</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; @variable(model, x[1:2]);</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; @objective(model, Min, my_f(x[1], my_square(x[2])))</code><code class="nohighlight hljs ansi" style="display:block;">my_f(x[1], my_square(x[2]))</code></pre><p>This has two important consequences.</p><p>First, you cannot register a user-defined function with the same name as an existing function. For example, a call to <a href="../../api/JuMP/#JuMP.@register"><code>@register</code></a> like:</p><pre><code class="language-julia hljs">julia&gt; @register(model, square, 1, square)</code></pre><p>will error because it is equivalent to:</p><pre><code class="language-julia hljs">julia&gt; square = add_user_defined_function(model, :square, 1, square)
ERROR: invalid redefinition of constant square
Stacktrace:
[...]</code></pre><p>and <code>square</code> already exists as a Julia function.</p><p>Second, you can construct and use <a href="../../api/JuMP/#JuMP.UserDefinedFunction"><code>UserDefinedFunction</code></a>s outside the macros.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; using JuMP</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; square(x) = x^2</code><code class="nohighlight hljs ansi" style="display:block;">square (generic function with 1 method)</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; model = Model();</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; @register(model, my_square, 1, square)</code><code class="nohighlight hljs ansi" style="display:block;">UserDefinedFunction(:my_square)</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; @variable(model, x)</code><code class="nohighlight hljs ansi" style="display:block;">x</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; typeof(my_square)</code><code class="nohighlight hljs ansi" style="display:block;">UserDefinedFunction</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; x_squared = my_square(x)</code><code class="nohighlight hljs ansi" style="display:block;">my_square(x)</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; typeof(x_squared)</code><code class="nohighlight hljs ansi" style="display:block;">NonlinearExpr<span class="sgr90"> (alias for GenericNonlinearExpr{GenericVariableRef{Float64}})</span></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; my_square_2 = UserDefinedFunction(:my_square)</code><code class="nohighlight hljs ansi" style="display:block;">UserDefinedFunction(:my_square)</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; my_square_2(x_squared)</code><code class="nohighlight hljs ansi" style="display:block;">my_square(my_square(x))</code></pre><h3 id="Register-gradients-and-Hessians"><a class="docs-heading-anchor" href="#Register-gradients-and-Hessians">Register gradients and Hessians</a><a id="Register-gradients-and-Hessians-1"></a><a class="docs-heading-anchor-permalink" href="#Register-gradients-and-Hessians" title="Permalink"></a></h3><p>By default, JuMP will use automatic differentiation to compute the gradient and Hessian of user-defined functions. If your function is not amenable to automatic differentiation, or you can compute analytic derivatives, you may pass additional arguments to <a href="../../api/JuMP/#JuMP.@register"><code>@register</code></a> to compute the first- and second-derivatives.</p><h4 id="Univariate-functions"><a class="docs-heading-anchor" href="#Univariate-functions">Univariate functions</a><a id="Univariate-functions-1"></a><a class="docs-heading-anchor-permalink" href="#Univariate-functions" title="Permalink"></a></h4><p>For univariate functions, a gradient function <code>∇f</code> returns a number that represents the first-order derivative. You may, in addition, pass a third function which returns a number representing the second-order derivative:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; using JuMP</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; f(x) = x^2</code><code class="nohighlight hljs ansi" style="display:block;">f (generic function with 1 method)</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; ∇f(x) = 2x</code><code class="nohighlight hljs ansi" style="display:block;">∇f (generic function with 1 method)</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; ∇²f(x) = 2</code><code class="nohighlight hljs ansi" style="display:block;">∇²f (generic function with 1 method)</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; model = Model();</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; @register(model, my_square, 1, f, ∇f, ∇²f)  # Providing ∇²f is optional</code><code class="nohighlight hljs ansi" style="display:block;">UserDefinedFunction(:my_square)</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; @variable(model, x)</code><code class="nohighlight hljs ansi" style="display:block;">x</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; @objective(model, Min, my_square(x))</code><code class="nohighlight hljs ansi" style="display:block;">my_square(x)</code></pre><h4 id="Multivariate-functions"><a class="docs-heading-anchor" href="#Multivariate-functions">Multivariate functions</a><a id="Multivariate-functions-1"></a><a class="docs-heading-anchor-permalink" href="#Multivariate-functions" title="Permalink"></a></h4><p>For multivariate functions, the gradient function <code>∇f</code> must take an <code>AbstractVector</code> as the first argument that is filled in-place. The Hessian function, <code>∇²f</code>, must take an <code>AbstractMatrix</code> as the first argument, the lower-triangular of which is filled in-place:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; using JuMP</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; f(x...) = (1 - x[1])^2 + 100 * (x[2] - x[1]^2)^2</code><code class="nohighlight hljs ansi" style="display:block;">f (generic function with 1 method)</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; function ∇f(g::AbstractVector{T}, x::T...) where {T}
           g[1] = 400 * x[1]^3 - 400 * x[1] * x[2] + 2 * x[1] - 2
           g[2] = 200 * (x[2] - x[1]^2)
           return
       end</code><code class="nohighlight hljs ansi" style="display:block;">∇f (generic function with 1 method)</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; function ∇²f(H::AbstractMatrix{T}, x::T...) where {T}
           H[1, 1] = 1200 * x[1]^2 - 400 * x[2] + 2
           # H[1, 2] = -400 * x[1]  &lt;-- Not needed. Fill the lower-triangular only.
           H[2, 1] = -400 * x[1]
           H[2, 2] = 200.0
           return
       end</code><code class="nohighlight hljs ansi" style="display:block;">∇²f (generic function with 1 method)</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; model = Model();</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; @register(model, rosenbrock, 2, f, ∇f, ∇²f)  # Providing ∇²f is optional</code><code class="nohighlight hljs ansi" style="display:block;">UserDefinedFunction(:rosenbrock)</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; @variable(model, x[1:2])</code><code class="nohighlight hljs ansi" style="display:block;">2-element Vector{VariableRef}:
 x[1]
 x[2]</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; @objective(model, Min, rosenbrock(x[1], x[2]))</code><code class="nohighlight hljs ansi" style="display:block;">rosenbrock(x[1], x[2])</code></pre><p>You may assume the Hessian matrix <code>H</code> is initialized with zeros, and because <code>H</code> is symmetric, you need only to fill in the non-zero of the lower-triangular terms. The matrix type passed in as <code>H</code> depends on the automatic differentiation system, so make sure the first argument to the Hessian function supports an <code>AbstractMatrix</code> (it may be something other than <code>Matrix{Float64}</code>). Moreover, you may assume only that <code>H</code> supports <code>size(H)</code> and <code>setindex!</code>. Finally, the matrix is treated as dense, so the performance will be poor on functions with high-dimensional input.</p><h3 id="User-defined-functions-with-vector-inputs"><a class="docs-heading-anchor" href="#User-defined-functions-with-vector-inputs">User-defined functions with vector inputs</a><a id="User-defined-functions-with-vector-inputs-1"></a><a class="docs-heading-anchor-permalink" href="#User-defined-functions-with-vector-inputs" title="Permalink"></a></h3><p>User-defined functions which take vectors as input arguments (for example, <code>f(x::Vector)</code>) are <em>not</em> supported. Instead, use Julia&#39;s splatting syntax to create a function with scalar arguments. For example, instead of:</p><pre><code class="language-julia hljs">f(x::Vector) = sum(x[i]^i for i in 1:length(x))</code></pre><p>define:</p><pre><code class="language-julia hljs">f(x...) = sum(x[i]^i for i in 1:length(x))</code></pre><p>Another approach is to define the splatted function as an anonymous function:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; using JuMP</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; model = Model();</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; @variable(model, x[1:5])</code><code class="nohighlight hljs ansi" style="display:block;">5-element Vector{VariableRef}:
 x[1]
 x[2]
 x[3]
 x[4]
 x[5]</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; f(x::Vector) = sum(x[i]^i for i in 1:length(x))</code><code class="nohighlight hljs ansi" style="display:block;">f (generic function with 1 method)</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; @register(model, my_f, 5, (x...) -&gt; f(collect(x)))</code><code class="nohighlight hljs ansi" style="display:block;">UserDefinedFunction(:my_f)</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; @objective(model, Min, my_f(x...))</code><code class="nohighlight hljs ansi" style="display:block;">my_f(x[1], x[2], x[3], x[4], x[5])</code></pre><h3 id="Automatic-differentiation"><a class="docs-heading-anchor" href="#Automatic-differentiation">Automatic differentiation</a><a id="Automatic-differentiation-1"></a><a class="docs-heading-anchor-permalink" href="#Automatic-differentiation" title="Permalink"></a></h3><p>JuMP does not support black-box optimization, so all user-defined functions must provide derivatives in some form. Fortunately, JuMP supports automatic differentiation of user-defined functions.</p><div class="admonition is-info"><header class="admonition-header">Info</header><div class="admonition-body"><p>Automatic differentiation is <em>not</em> finite differencing. JuMP&#39;s automatically computed derivatives are not subject to approximation error.</p></div></div><p>JuMP uses <a href="https://github.com/JuliaDiff/ForwardDiff.jl">ForwardDiff.jl</a> to perform automatic differentiation; see the ForwardDiff.jl <a href="https://www.juliadiff.org/ForwardDiff.jl/v0.10.2/user/limitations.html">documentation</a> for a description of how to write a function suitable for automatic differentiation.</p><h4 id="Common-mistakes-when-writing-a-user-defined-function"><a class="docs-heading-anchor" href="#Common-mistakes-when-writing-a-user-defined-function">Common mistakes when writing a user-defined function</a><a id="Common-mistakes-when-writing-a-user-defined-function-1"></a><a class="docs-heading-anchor-permalink" href="#Common-mistakes-when-writing-a-user-defined-function" title="Permalink"></a></h4><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>Get an error like <code>No method matching Float64(::ForwardDiff.Dual)</code>? Read this section, and see the guidelines at <a href="https://www.juliadiff.org/ForwardDiff.jl/release-0.10/user/limitations.html">ForwardDiff.jl</a>.</p></div></div><p>The most common error is that your user-defined function is not generic with respect to the number type, that is, don&#39;t assume that the input to the function is <code>Float64</code>.</p><pre><code class="language-julia hljs">f(x::Float64) = 2 * x  # This will not work.
f(x::Real)    = 2 * x  # This is good.
f(x)          = 2 * x  # This is also good.</code></pre><p>Another reason you may encounter this error is if you create arrays inside your function which are <code>Float64</code>.</p><pre><code class="language-julia hljs">function bad_f(x...)
    y = zeros(length(x))  # This constructs an array of `Float64`!
    for i = 1:length(x)
        y[i] = x[i]^i
    end
    return sum(y)
end

function good_f(x::T...) where {T&lt;:Real}
    y = zeros(T, length(x))  # Construct an array of type `T` instead!
    for i = 1:length(x)
        y[i] = x[i]^i
    end
    return sum(y)
end</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../complex/">« Complex number support</a><a class="docs-footer-nextpage" href="../../api/JuMP/">JuMP »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.28.0-DEV on <span class="colophon-date" title="Wednesday 16 August 2023 07:15">Wednesday 16 August 2023</span>. Using Julia version 1.9.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
